<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css">
<link rel="stylesheet" href="css/jquery-ui-1.10.4.custom.css">
<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>
<script src="//www.parsecdn.com/js/parse-1.2.18.min.js"></script>
</head>
        <script>
            !function(d,s,id) {
                 var js,fjs=d.getElementsByTagName(s)[0];
                 if(!d.getElementById(id)) {
                     js=d.createElement(s);
                     js.id=id;
                     js.src="https://platform.twitter.com/widgets.js";
                     fjs.parentNode.insertBefore(js,fjs);
                 }}
            (document,"script","twitter-wjs");
        </script>
        
        <script src="js/lib/jquery.js"></script>
        <script src="js/lib/underscore.js"></script>
        <script src="js/lib/backbone.js"></script>
        <script src="js/lib/jquery-dateFormat.js"></script>
        <script src="js/lib/jquery-ui-1.10.4.custom.js"></script>
        <script src="js/app.js"></script>
<script type="text/javascript">
Parse.initialize("Q5fqlrREfwC2tXwfC83mNpOvyvSEIwQYiodjGnqk", "czzNrCFWawfmKcXgnE1d9r2YSTyEUWGwbSnmNXGX");

</script>
<body>
 <script type="text/javascript">
 function statusChangeCallback(response) {
    console.log('statusChangeCallback');
    console.log(response);
    if (response.status === 'connected') {
      // Logged into your app and Facebook.
      testAPI();
    } else if (response.status === 'not_authorized') {
      // The person is logged into Facebook, but not your app.
      document.getElementById('status').innerHTML = 'Please log ' +
        'into this app.';
    } else {
      // The person is not logged into Facebook, so we're not sure if
      // they are logged into this app or not.
      document.getElementById('status').innerHTML = 'Please log ' +
        'into Facebook.';
    }
  }
            //initialize settings
            window.fbAsyncInit = function() {
              FB.init({
                appId: 267808760063209,
                cookie: true,
                xfbml: true,
                version: 'v2.0'
              });
            FB.getLoginStatus(function(response) {
                statusChangeCallback(response);
              });

            };
            (function(){
              var e=document.createElement('script');
              e.async=true;
              e.src=document.location.protocol+'//connect.facebook.net/en_US/all.js';
              document.getElementById('fb-root').appendChild(e);
            }());  
            function doFBLogin() {  
                FB.login(function(response) {  
                    if (response.authResponse) {  
                        var token = response.authResponse.accessToken;  
                        //define the login function on your client through FB  
                    } else {  
                        //processing an error  
                    }  
            }, {scope:'email,status_update,publish_stream'});  
            //scope â€“ the set of fields we received from the server when login  
            }  
            </script>

<div data-role="page" id="index">
  <div data-role="header" data-position="fixed" data-fullscreen="true">
    <h1>My Favourite Books</h1>
    <a href="#LoginDialog" data-role="button" class="ui-btn-right" data-icon="login" onClick="doFBLogin();">Login</a>
    
    <div data-role="controlgroup" data-type="horizontal">
    <a class="ui-label-right"><div class="fb-share-button"  data-href="http://ec2-54-72-165-147.eu-west-1.compute.amazonaws.com/" data-type="button_count"></div></a>
    <a class="ui-label-right"><a href="https://twitter.com/share" class="twitter-share-button" data-related="jasoncosta" data-lang="en">Tweet</a> </a>
  </div>
</div>

  <div data-role="main" class="ui-content" id="index"><br><br><br><br><br>
    
        <div id="fb-root"></div>
            <script>
                (function(d, s, id) {
                    var js, fjs = d.getElementsByTagName(s)[0];
                    if (d.getElementById(id)) return;
                    js = d.createElement(s); 
                    js.id = id;
                    js.src = "//connect.facebook.net/en/all.js#xfbml=1&appId=267808760063209";
                    fjs.parentNode.insertBefore(js, fjs);
                }(document, 'script', 'facebook-jssdk'));
            </script>

        

        <div id="books">
            <form id="addBook" action="#">
                <div>
                <label for="coverImage">CoverImage: </label><input id="coverImage" type="file" />
                <label for="title">Title: </label><input id="title" type="text" />
                <label for="author">Author: </label><input id="author" type="text" />
                <label for="releaseDate" >Release_date: </label><input id="releaseDate" type="text" placeholder="YYYY.MM"/>
                <label for="keywords">Keywords: </label><input id="keywords" type="text" />
                <label for="links">Links: </label><input id="links" type="text" placeholder="Type in the book's link..."/>
                <button id="add" class="ui-btn" data-icon="add" href="#booklist">Add</button>
              </div>      
        </form>

</div>
</div>
</div>
<div data-role="page" id="booklist">
  <div data-role="main" class="ui-content">
      <script id="book-Template" type="text/template">
            <img src="<%= coverImage %>"/>
            <ul>
            <li><span class="title"><%= title %></span></li>
            <li><span class="author"><%= author %></span></li>
            <li><span class="date"><%= $.format.date( new Date( releaseDate ), 'dd MMMM yyyy' ) %></span></li>
            <li><span class="keywords"><% _.each( keywords, function( keyobj ) {%><%= keyobj.keyword %><% } ); %></span></li>
            <li><span class="links"><%= links %></span></li>
            <button class="delete">Delete</button>
            </ul>
        </script>
  </div>
</div>
</body>


</html>
